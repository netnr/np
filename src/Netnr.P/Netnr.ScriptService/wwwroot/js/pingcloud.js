var PingCloud = [
    {
        "name": "AWS",
        "alias": "亚马逊云",
        "link": "https://aws.amazon.com/",
        "list": [
            {
                "area": "北京",
                "alias": "中国",
                "endpoint": "https://dynamodb.cn-north-1.amazonaws.com.cn/"
            },
            {
                "area": "宁夏",
                "alias": "中国",
                "endpoint": "https://dynamodb.cn-northwest-1.amazonaws.com.cn/"
            },
            {
                "area": "香港",
                "alias": "中国",
                "endpoint": "https://dynamodb.ap-east-1.amazonaws.com/"
            },
            {
                "area": "首尔",
                "alias": "亚太地区",
                "endpoint": "https://dynamodb.ap-northeast-2.amazonaws.com/"
            },
            {
                "area": "东京",
                "alias": "亚太地区",
                "endpoint": "https://dynamodb.ap-northeast-1.amazonaws.com/"
            },
            {
                "area": "新加坡",
                "alias": "亚太地区",
                "endpoint": "https://dynamodb.ap-southeast-1.amazonaws.com/"
            },
            {
                "area": "孟买",
                "alias": "亚太地区",
                "endpoint": "https://dynamodb.ap-south-1.amazonaws.com/"
            },
            {
                "area": "悉尼",
                "alias": "亚太地区",
                "endpoint": "https://dynamodb.ap-southeast-2.amazonaws.com/"
            },
            {
                "area": "法兰克福",
                "alias": "欧洲",
                "endpoint": "https://dynamodb.eu-central-1.amazonaws.com/"
            },
            {
                "area": "巴黎",
                "alias": "欧洲",
                "endpoint": "https://dynamodb.eu-west-3.amazonaws.com/"
            },
            {
                "area": "伦敦",
                "alias": "欧洲",
                "endpoint": "https://dynamodb.eu-west-2.amazonaws.com/"
            },
            {
                "area": "爱尔兰",
                "alias": "欧洲",
                "endpoint": "https://dynamodb.eu-west-1.amazonaws.com/"
            },
            {
                "area": "斯德哥尔摩",
                "alias": "欧洲",
                "endpoint": "https://dynamodb.eu-north-1.amazonaws.com/"
            },
            {
                "area": "圣保罗",
                "alias": "南美洲",
                "endpoint": "https://dynamodb.sa-east-1.amazonaws.com/"
            },
            {
                "area": "美国",
                "alias": "AWS GovCloud",
                "endpoint": "https://dynamodb.us-gov-west-1.amazonaws.com/"
            },
            {
                "area": "弗吉尼亚",
                "alias": "美国东部",
                "endpoint": "https://dynamodb.us-east-1.amazonaws.com/"
            },
            {
                "area": "俄亥俄",
                "alias": "美国东部",
                "endpoint": "https://dynamodb.us-east-2.amazonaws.com/"
            },
            {
                "area": "加利福尼亚",
                "alias": "美国西部",
                "endpoint": "https://dynamodb.us-west-1.amazonaws.com/"
            },
            {
                "area": "俄勒冈",
                "alias": "美国西部",
                "endpoint": "https://dynamodb.us-west-2.amazonaws.com/"
            },
            {
                "area": "蒙特利尔",
                "alias": "加拿大",
                "endpoint": "https://dynamodb.ca-central-1.amazonaws.com/"
            }
        ]
    },
    {
        "name": "Aliyun",
        "alias": "阿里云",
        "link": "https://www.aliyun.com/",
        "list": [
            {
                "area": "北京",
                "alias": "华北 2",
                "endpoint": "https://oss-cn-beijing.aliyuncs.com/"
            },
            {
                "area": "上海",
                "alias": "华东 2",
                "endpoint": "https://oss-cn-shanghai.aliyuncs.com/"
            },
            {
                "area": "深圳",
                "alias": "华南 1",
                "endpoint": "https://oss-cn-shenzhen.aliyuncs.com/"
            },
            {
                "area": "杭州",
                "alias": "华东 1",
                "endpoint": "https://oss-cn-hangzhou.aliyuncs.com/"
            },
            {
                "area": "青岛",
                "alias": "华北 1",
                "endpoint": "https://oss-cn-qingdao.aliyuncs.com/"
            },
            {
                "area": "成都",
                "alias": "西南 1",
                "endpoint": "https://oss-cn-chengdu.aliyuncs.com/"
            },
            {
                "area": "张家口",
                "alias": "华北 3",
                "endpoint": "https://oss-cn-zhangjiakou.aliyuncs.com/"
            },
            {
                "area": "呼和浩特",
                "alias": "华北 5",
                "endpoint": "https://oss-cn-huhehaote.aliyuncs.com/"
            },
            {
                "area": "香港",
                "alias": "中国香港",
                "endpoint": "https://oss-cn-hongkong.aliyuncs.com/"
            },
            {
                "area": "东京",
                "alias": "亚太东北 1",
                "endpoint": "https://oss-ap-northeast-1.aliyuncs.com/"
            },
            {
                "area": "新加坡",
                "alias": "亚太东南 1",
                "endpoint": "https://oss-ap-southeast-1.aliyuncs.com/"
            },
            {
                "area": "吉隆坡",
                "alias": "亚太东南 3",
                "endpoint": "https://oss-ap-southeast-3.aliyuncs.com/"
            },
            {
                "area": "孟买",
                "alias": "亚太南部 1",
                "endpoint": "https://oss-ap-south-1.aliyuncs.com/"
            },
            {
                "area": "雅加达",
                "alias": "亚太东南 5",
                "endpoint": "https://oss-ap-southeast-5.aliyuncs.com/"
            },
            {
                "area": "悉尼",
                "alias": "亚太东南 2",
                "endpoint": "https://oss-ap-southeast-2.aliyuncs.com/"
            },
            {
                "area": "迪拜",
                "alias": "中东东部 1",
                "endpoint": "https://oss-me-east-1.aliyuncs.com/"
            },
            {
                "area": "法兰克福",
                "alias": "欧洲中部 1",
                "endpoint": "https://oss-eu-central-1.aliyuncs.com/"
            },
            {
                "area": "伦敦",
                "alias": "英国（伦敦）",
                "endpoint": "https://oss-eu-west-1.aliyuncs.com/"
            },
            {
                "area": "弗吉尼亚",
                "alias": "美国东部 1",
                "endpoint": "https://oss-us-east-1.aliyuncs.com/"
            },
            {
                "area": "硅谷",
                "alias": "美国西部 1",
                "endpoint": "https://oss-us-west-1.aliyuncs.com/"
            }
        ]
    },
    {
        "name": "Tencent",
        "alias": "腾讯云",
        "link": "https://cloud.tencent.com/",
        "list": [
            {
                "area": "北京",
                "alias": "ap-beijing",
                "endpoint": "https://cos.ap-beijing.myqcloud.com/"
            },
            {
                "area": "上海",
                "alias": "ap-shanghai",
                "endpoint": "https://cos.ap-shanghai.myqcloud.com/"
            },
            {
                "area": "广州",
                "alias": "ap-guangzhou",
                "endpoint": "https://cos.ap-guangzhou.myqcloud.com/"
            },
            {
                "area": "成都",
                "alias": "ap-chengdu",
                "endpoint": "https://cos.ap-chengdu.myqcloud.com/"
            },
            {
                "area": "香港",
                "alias": "ap-hongkong",
                "endpoint": "https://cos.ap-hongkong.myqcloud.com/"
            },
            {
                "area": "首尔",
                "alias": "ap-seoul",
                "endpoint": "https://cos.ap-seoul.myqcloud.com/"
            },
            {
                "area": "新加坡",
                "alias": "ap-singapore",
                "endpoint": "https://cos.ap-singapore.myqcloud.com/"
            },
            {
                "area": "法兰克福",
                "alias": "eu-frankfurt",
                "endpoint": "https://cos.eu-frankfurt.myqcloud.com/"
            },
            {
                "area": "多伦多",
                "alias": "na-toronto",
                "endpoint": "https://cos.na-toronto.myqcloud.com/"
            }
        ]
    },
    {
        "name": "Azure",
        "alias": "Azure",
        "link": "https://azure.microsoft.com/",
        "list": [
            {
                "area": "北京",
                "alias": "China North",
                "endpoint": "https://astchinanorth.blob.core.chinacloudapi.cn/"
            },
            {
                "area": "上海",
                "alias": "China East",
                "endpoint": "https://astchinaeast.blob.core.chinacloudapi.cn/"
            },
            {
                "area": "香港",
                "alias": "East Asia",
                "endpoint": "https://asteastasia.blob.core.windows.net/"
            },
            {
                "area": "首尔",
                "alias": "Korea Central",
                "endpoint": "https://astkoreacentral.blob.core.windows.net/"
            },
            {
                "area": "釜山",
                "alias": "Korea South",
                "endpoint": "https://astkoreasouth.blob.core.windows.net/"
            },
            {
                "area": "大阪府",
                "alias": "Japan West",
                "endpoint": "https://astjapanwest.blob.core.windows.net/"
            },
            {
                "area": "新加坡",
                "alias": "Southeast Asia",
                "endpoint": "https://astsoutheastasia.blob.core.windows.net/"
            },
            {
                "area": "埼玉县",
                "alias": "Japan East",
                "endpoint": "https://astjapaneast.blob.core.windows.net/"
            },
            {
                "area": "孟买",
                "alias": "West India",
                "endpoint": "https://astwestindia.blob.core.windows.net/"
            },
            {
                "area": "普纳",
                "alias": "Central India",
                "endpoint": "https://astcentralindia.blob.core.windows.net/"
            },
            {
                "area": "金奈",
                "alias": "South India",
                "endpoint": "https://astsouthindia.blob.core.windows.net/"
            },
            {
                "area": "伦敦",
                "alias": "UK South",
                "endpoint": "https://astuksouth.blob.core.windows.net/"
            },
            {
                "area": "加的夫",
                "alias": "UK West",
                "endpoint": "https://astukwest.blob.core.windows.net/"
            },
            {
                "area": "荷兰",
                "alias": "West Europe",
                "endpoint": "https://astwesteurope.blob.core.windows.net/"
            },
            {
                "area": "爱尔兰",
                "alias": "North Europe",
                "endpoint": "https://astnortheurope.blob.core.windows.net/"
            },
            {
                "area": "圣保罗",
                "alias": "Brazil South",
                "endpoint": "https://astbrazilsouth.blob.core.windows.net/"
            },
            {
                "area": "维多利亚",
                "alias": "Australia Southeast",
                "endpoint": "https://astaustraliasoutheast.blob.core.windows.net/"
            },
            {
                "area": "新南威尔士州",
                "alias": "Australia East",
                "endpoint": "https://astaustraliaeast.blob.core.windows.net/"
            },
            {
                "area": "弗吉尼亚",
                "alias": "East US",
                "endpoint": "https://asteastus.blob.core.windows.net/"
            },
            {
                "area": "加利福尼亚",
                "alias": "West US",
                "endpoint": "https://astwestus.blob.core.windows.net/"
            },
            {
                "area": "雷德蒙德",
                "alias": "West US 2",
                "endpoint": "https://astwestus2.blob.core.windows.net/"
            },
            {
                "area": "伊利诺伊",
                "alias": "North Central US",
                "endpoint": "https://astnorthcentralus.blob.core.windows.net/"
            },
            {
                "area": "德克萨斯",
                "alias": "South Central US\t",
                "endpoint": "https://astsouthcentralus.blob.core.windows.net/"
            },
            {
                "area": "怀俄明州",
                "alias": "West Central US",
                "endpoint": "https://astwestcentralus.blob.core.windows.net/"
            },
            {
                "area": "爱荷华",
                "alias": "Central US",
                "endpoint": "https://astcentralus.blob.core.windows.net/"
            },
            {
                "area": "多伦多",
                "alias": "Canada Central",
                "endpoint": "https://astcanadacentral.blob.core.windows.net/"
            },
            {
                "area": "魁北克市",
                "alias": "Canada East",
                "endpoint": "https://astcanadaeast.blob.core.windows.net/"
            }
        ]
    },
    {
        "name": "Vultr",
        "alias": "Vultr",
        "link": "https://www.vultr.com/",
        "list": [
            {
                "area": "东京",
                "alias": "hnd-jp",
                "endpoint": "https://hnd-jp-ping.vultr.com/"
            },
            {
                "area": "新加坡",
                "alias": "sgp",
                "endpoint": "https://sgp-ping.vultr.com/"
            },
            {
                "area": "悉尼",
                "alias": "syd-au",
                "endpoint": "https://syd-au-ping.vultr.com/"
            },
            {
                "area": "法兰克福",
                "alias": "fra-de",
                "endpoint": "https://fra-de-ping.vultr.com/"
            },
            {
                "area": "巴黎",
                "alias": "par-fr",
                "endpoint": "https://par-fr-ping.vultr.com/"
            },
            {
                "area": "伦敦",
                "alias": "lon-gb",
                "endpoint": "https://lon-gb-ping.vultr.com/"
            },
            {
                "area": "阿姆斯特丹",
                "alias": "ams-nl",
                "endpoint": "https://ams-nl-ping.vultr.com/"
            },
            {
                "area": "硅谷",
                "alias": "sjo-ca-us",
                "endpoint": "https://sjo-ca-us-ping.vultr.com/"
            },
            {
                "area": "加利福尼亚",
                "alias": "lax-ca-us",
                "endpoint": "https://lax-ca-us-ping.vultr.com/"
            },
            {
                "area": "伊利诺伊",
                "alias": "il-us",
                "endpoint": "https://il-us-ping.vultr.com/"
            },
            {
                "area": "西雅图",
                "alias": "wa-us",
                "endpoint": "https://wa-us-ping.vultr.com/"
            },
            {
                "area": "迈阿密",
                "alias": "fl-us",
                "endpoint": "https://fl-us-ping.vultr.com/"
            },
            {
                "area": "纽约",
                "alias": "nj-us",
                "endpoint": "https://nj-us-ping.vultr.com/"
            },
            {
                "area": "达拉斯",
                "alias": "tx-us",
                "endpoint": "https://tx-us-ping.vultr.com/"
            },
            {
                "area": "亚特兰大",
                "alias": "ga-us",
                "endpoint": "https://ga-us-ping.vultr.com/"
            }
        ]
    },
    {
        "name": "Linode",
        "alias": "Linode",
        "link": "https://www.linode.com/",
        "list": [
            {
                "area": "东京",
                "alias": "tokyo2",
                "endpoint": "http://speedtest.tokyo2.linode.com/"
            },
            {
                "area": "新加坡",
                "alias": "singapore",
                "endpoint": "http://speedtest.singapore.linode.com/"
            },
            {
                "area": "法兰克福",
                "alias": "frankfurt",
                "endpoint": "http://speedtest.frankfurt.linode.com/"
            },
            {
                "area": "伦敦",
                "alias": "london",
                "endpoint": "http://speedtest.london.linode.com/"
            },
            {
                "area": "菲蒙市",
                "alias": "fremont",
                "endpoint": "http://speedtest.fremont.linode.com/"
            },
            {
                "area": "达拉斯",
                "alias": "dallas",
                "endpoint": "http://speedtest.dallas.linode.com/"
            },
            {
                "area": "亚特兰大",
                "alias": "atlanta",
                "endpoint": "http://speedtest.atlanta.linode.com/"
            },
            {
                "area": "纽瓦克市",
                "alias": "newark",
                "endpoint": "http://speedtest.newark.linode.com/"
            }
        ]
    },
    {
        "name": "Google",
        "alias": "谷歌云",
        "link": "https://cloud.google.com/",
        "list": [
            {
                "area": "台湾",
                "alias": "asia-east1",
                "endpoint": "https://asia-east1-gce.cloudharmony.net/"
            },
            {
                "area": "东京",
                "alias": "asia-northeast1",
                "endpoint": "https://asia-northeast1-gce.cloudharmony.net/"
            },
            {
                "area": "新加坡",
                "alias": "asia-southeast1",
                "endpoint": "https://asia-southeast1-gce.cloudharmony.net/"
            },
            {
                "area": "孟买",
                "alias": "asia-south1",
                "endpoint": "https://asia-south1-gce.cloudharmony.net/"
            },
            {
                "area": "悉尼",
                "alias": "australia-southeast1",
                "endpoint": "https://australia-southeast1-gce.cloudharmony.net/"
            },
            {
                "area": "法兰克福",
                "alias": "europe-west3",
                "endpoint": "https://europe-west3-gce.cloudharmony.net/"
            },
            {
                "area": "伦敦",
                "alias": "europe-west2",
                "endpoint": "https://europe-west2-gce.cloudharmony.net/"
            },
            {
                "area": "埃姆斯哈文",
                "alias": "europe-west4",
                "endpoint": "https://europe-west4-gce.cloudharmony.net/"
            },
            {
                "area": "比利时",
                "alias": "europe-west1",
                "endpoint": "https://europe-west1-gce.cloudharmony.net/"
            },
            {
                "area": "圣保罗",
                "alias": "southamerica-east1",
                "endpoint": "https://southamerica-east1-gce.cloudharmony.net/"
            },
            {
                "area": "弗吉尼亚",
                "alias": "us-east4",
                "endpoint": "https://us-east4-gce.cloudharmony.net/"
            },
            {
                "area": "俄勒冈",
                "alias": "us-west1",
                "endpoint": "https://us-west1-gce.cloudharmony.net/"
            },
            {
                "area": "南卡罗来纳",
                "alias": "us-east1",
                "endpoint": "https://us-east1-gce.cloudharmony.net/"
            },
            {
                "area": "爱荷华",
                "alias": "us-central1",
                "endpoint": "https://us-central1-gce.cloudharmony.net/"
            },
            {
                "area": "蒙特利尔",
                "alias": "northamerica-northeast1",
                "endpoint": "https://northamerica-northeast1-gce.cloudharmony.net/"
            }
        ]
    },
    {
        "name": "Bandwagon",
        "alias": "搬瓦工",
        "link": "https://www.bwh88.net/",
        "list": [
            {
                "area": "香港",
                "alias": "HKHK_1",
                "endpoint": "http://69.171.66.153/"
            },
            {
                "area": "荷兰",
                "alias": "EUNL_3",
                "endpoint": "http://45.62.120.202/"
            },
            {
                "area": "加利福尼亚",
                "alias": "USCA_9",
                "endpoint": "http://65.49.131.102/"
            },
            {
                "area": "加利福尼亚",
                "alias": "USCA_8",
                "endpoint": "http://23.252.99.102/"
            },
            {
                "area": "加利福尼亚",
                "alias": "USCA_6",
                "endpoint": "http://162.244.241.102/"
            },
            {
                "area": "加利福尼亚",
                "alias": "USAZ_3",
                "endpoint": "http://23.252.103.101/"
            },
            {
                "area": "加利福尼亚",
                "alias": "USAZ_2",
                "endpoint": "http://198.35.46.28/"
            },
            {
                "area": "新泽西",
                "alias": "USNJ",
                "endpoint": "http://23.29.138.3/"
            },
            {
                "area": "弗里蒙特",
                "alias": "USCA_FMT",
                "endpoint": "http://184.105.138.80/"
            },
            {
                "area": "纽约",
                "alias": "USNY_2",
                "endpoint": "http://208.167.227.122/"
            },
            {
                "area": "多伦多",
                "alias": "CABC_1",
                "endpoint": "http://172.93.32.16/"
            }
        ]
    },
    {
        "name": "DigitalOcean",
        "alias": "DO",
        "link": "https://www.digitalocean.com/",
        "list": [
            {
                "area": "新加坡",
                "alias": "sgp1",
                "endpoint": "http://speedtest-sgp1.digitalocean.com/"
            },
            {
                "area": "班加罗尔",
                "alias": "blr1",
                "endpoint": "http://speedtest-blr1.digitalocean.com/"
            },
            {
                "area": "法兰克福",
                "alias": "fra1",
                "endpoint": "http://speedtest-fra1.digitalocean.com/"
            },
            {
                "area": "伦敦",
                "alias": "lon1",
                "endpoint": "http://speedtest-lon1.digitalocean.com/"
            },
            {
                "area": "阿姆斯特丹",
                "alias": "ams2",
                "endpoint": "http://speedtest-ams2.digitalocean.com/"
            },
            {
                "area": "加利福尼亚",
                "alias": "sfo1",
                "endpoint": "http://speedtest-sfo1.digitalocean.com/"
            },
            {
                "area": "纽约",
                "alias": "nyc1",
                "endpoint": "http://speedtest-nyc1.digitalocean.com/"
            },
            {
                "area": "多伦多",
                "alias": "tor1",
                "endpoint": "http://speedtest-tor1.digitalocean.com/"
            }
        ]
    },
    {
        "name": "Qiniu",
        "alias": "七牛云",
        "link": "https://www.qiniu.com/",
        "list": [
            {
                "area": "北京",
                "alias": "华北",
                "endpoint": "https://upload-z1.qiniup.com/"
            },
            {
                "area": "杭州",
                "alias": "华东",
                "endpoint": "https://upload.qiniup.com/"
            },
            {
                "area": "东莞",
                "alias": "华南",
                "endpoint": "https://upload-z2.qiniup.com/"
            },
            {
                "area": "美国",
                "alias": "北美",
                "endpoint": "https://up-na0.qiniup.com/"
            }
        ]
    },
    {
        "name": "MOS",
        "alias": "美团云",
        "link": "https://www.mtyun.com/",
        "list": [
            {
                "area": "北京",
                "alias": "华北1区",
                "endpoint": "https://mtmss.com/"
            },
            {
                "area": "上海",
                "alias": "华东1区",
                "endpoint": "https://eastchina1.mtmss.com/"
            }
        ]
    },
    {
        "name": "Huawei",
        "alias": "华为云",
        "link": "https://www.huaweicloud.com/",
        "list": [
            {
                "area": "北京",
                "alias": "中国华北区1",
                "endpoint": "https://obs.cn-north-1.myhwclouds.com/"
            },
            {
                "area": "上海",
                "alias": "中国华东区2",
                "endpoint": "https://obs.cn-east-2.myhwclouds.com/"
            },
            {
                "area": "广州",
                "alias": "中国华南区1",
                "endpoint": "https://obs.cn-south-1.myhwclouds.com/"
            }
        ]
    },
    {
        "name": "UCloud",
        "alias": "UCloud",
        "link": "https://www.ucloud.cn",
        "list": [
            {
                "area": "北京",
                "alias": "北京",
                "endpoint": "https://www.cn-bj.ufileos.com/"
            },
            {
                "area": "上海",
                "alias": "上海",
                "endpoint": "https://www.cn-sh2.ufileos.com/"
            },
            {
                "area": "广州",
                "alias": "广东",
                "endpoint": "https://www.cn-gd.ufileos.com/"
            },
            {
                "area": "香港",
                "alias": "香港",
                "endpoint": "https://www.hk.ufileos.com/"
            },
            {
                "area": "美国",
                "alias": "美国",
                "endpoint": "http://www.us-ca.ufileos.com/"
            }
        ]
    },
    {
        "name": "Baidu",
        "alias": "百度云",
        "link": "https://cloud.baidu.com",
        "list": [
            {
                "area": "北京",
                "alias": "BJ",
                "endpoint": "https://s3.bj.bcebos.com/"
            },
            {
                "area": "广州",
                "alias": "GZ",
                "endpoint": "https://s3.gz.bcebos.com/"
            },
            {
                "area": "苏州",
                "alias": "SU",
                "endpoint": "https://s3.su.bcebos.com/"
            }
        ]
    },
    {
        "name": "Ksyun",
        "alias": "金山云",
        "link": "https://www.ksyun.com",
        "list": [
            {
                "area": "北京",
                "alias": "cn-beijing",
                "endpoint": "https://ks3-cn-beijing.ksyun.com/"
            },
            {
                "area": "上海",
                "alias": "cn-shanghai",
                "endpoint": "https://ks3-cn-shanghai.ksyun.com/"
            },
            {
                "area": "香港",
                "alias": "cn-hk-1",
                "endpoint": "https://ks3-cn-hk-1.ksyun.com/"
            }
        ]
    },
    {
        "name": "QingCloud",
        "alias": "青云",
        "link": "https://www.qingcloud.com",
        "list": [
            {
                "area": "北京",
                "alias": "pek3a",
                "endpoint": "https://pek3a.qingstor.com/"
            },
            {
                "area": "上海",
                "alias": "sh1a",
                "endpoint": "https://sh1a.qingstor.com/"
            }
        ]
    }
]


var pc = {
    init: function () {
        var htm = [], tbheader = '<tr><th style="width:40%">区域</th><th style="width:40%">别名</th><th style="width:20%">ms</th></tr>';
        $.each(PingCloud, function () {
            var p = this;
            htm.push('<div class="col-xl-3 col-lg-4 col-md-6 px-3"><table class="table table-sm table-bordered table-hover">')

            var pname = p.name;
            if (p.alias != pname) {
                pname = pname + '（' + p.alias + '）';
            }

            var pfn = '<a href="javascript:void(0);" class="badge badge-info mt-1 float-right pingfn">Ping</a>';

            htm.push('<tr><td colspan="3" class="bg-light"><a target="_blank" href="' + p.link + '">' + pname + '</a>' + pfn + '</td></tr>');
            htm.push(tbheader);
            $.each(p.list, function () {
                var n = this;
                htm.push('<tr><td class="tipep" data-toggle="tooltip" data-placement="top" title="' + n.endpoint + '">' + n.area + '</td><td>' + n.alias + '</td><td data-endpoint="' + n.endpoint + '"></td></tr>');
            })
            htm.push('</table></div>')
        })
        document.getElementById("divbox").innerHTML = htm.join('');

        //点击委托
        $(document).click(function (e) {
            e = e || window.event;
            var target = e.target || e.srcElement;

            //ping
            if (target.nodeName == "A" && target.className.indexOf("pingfn") >= 0) {
                if (pc.queue.list.length) {
                    jz.msg("当前正在测速")
                } else {
                    $(target).parents('table').find('td').each(function () {

                        var that = this, ep = that.getAttribute('data-endpoint');
                        if (ep && ep.length > 3) {
                            //加入队列
                            pc.queue.list.push({ endpoint: ep, td: that })
                        }
                    });

                    pc.task();
                }
            }
            else if (target.nodeName == "TD" && target.className.indexOf("tipep") >= 0) {
                var ep = target.getAttribute("data-original-title");
                var pingep = "ping " + ep.split('//')[1];
                pingep.slice(-1) == "/" && (pingep = pingep.substring(0, pingep.length - 1));
                var epart = jz.alert('<a target="_blank" href="' + ep + '">' + ep + '</a><br/><input class="mt-3 form-control bg-dark text-white text-center" value="' + pingep + '">');
                $(epart.fn.body).find('input').focus(function () {
                    this.select();
                })
            }
        })

        //流
        pc.flow();
        $(window).on('resize', function () {
            setTimeout(pc.flow, 310)
        });

        //提示
        $('.tipep').tooltip();
    },
    flow: function () {
        var dbox = $('#divbox'),
            dcard = dbox.children(),
            colWidth = dcard.outerWidth(),
            colHeights = [],
            colCount = Math.floor(dbox.width() / colWidth);
        colHeights.length = colCount;
        dcard.each(function () {
            var minValue = colHeights[0] || 0
            var minIndex = 0
            for (var i = 0; i < colCount; i++) {
                if ((colHeights[i] || 0) < minValue) {
                    minValue = colHeights[i] || 0;
                    minIndex = i
                }
            }
            $(this).css({
                left: minIndex * colWidth,
                top: minValue
            })
            colHeights[minIndex] = (colHeights[minIndex] || 0) + $(this).outerHeight(true)
        })
    },
    //Ping
    ping: function (url, cb) {
        var img = new Image(), start = new Date().valueOf();
        img.onload = img.onerror = function () {
            var end = new Date().valueOf();
            cb(end - start, start, end)
        }
        img.src = url;
    },
    //任务
    task: function (item) {
        item = item || pc.queue.use();

        item.td.innerHTML = "conn...";
        pc.ping(item.endpoint, function () {
            pc.ping(item.endpoint, function (ms) {
                var fc = 'limegreen';
                if (ms > 100) {
                    fc = 'teal';
                }
                if (ms > 200) {
                    fc = 'orange';
                }
                if (ms > 300) {
                    fc = 'orangered';
                }
                if (ms > 500) {
                    fc = 'red';
                }
                item.td.innerHTML = '<b style="color:' + fc + '">' + ms + '</b>';

                //可消费
                var newi = pc.queue.use();
                if (newi) {
                    pc.task(newi);
                }
            })
        })
    },
    //队列
    queue: {
        list: [],
        use: function () {
            if (pc.queue.list.length) {
                return pc.queue.list.splice(0, 1)[0];
            }
        }
    }
}

pc.init();